# Функция: `highlight_segments`

### Описание

Функция для выделения цветом сегментов аудио/видео на основе временных меток идей.

### Входные данные (Input)

#### Параметр 1: `segments`

**Тип:** `list[dict]`  
**Описание:** Список сегментов с временными метками

**Структура каждого сегмента:**

```python
{
    'start': float,      # Время начала сегмента в секундах
    'end': float,        # Время окончания сегмента в секундах
    'text': str          # Текст сегмента
}
```

**Пример:**

```python
segments = [
    {'start': 0.0, 'end': 10.0, 'text': 'Часть 1'},
    {'start': 10.0, 'end': 20.0, 'text': 'Часть 2'},
    {'start': 20.0, 'end': 30.0, 'text': 'Часть 3'}
]
```

#### Параметр 2: `idea_marks`

**Тип:** `list[dict]`  
**Описание:** Список временных меток идей для выделения

**Структура каждой метки:**

```python
{
    'start_time': float,  # Время начала идеи в секундах
    'end_time': float,    # Время окончания идеи в секундах
    'color': str          # Цвет для выделения (например: 'red', 'blue', 'green')
}
```

**Пример:**

```python
idea_marks = [
    {'start_time': 0.0, 'end_time': 40.0, 'color': 'red'},
    {'start_time': 10.0, 'end_time': 30.0, 'color': 'blue'},
    {'start_time': 15.0, 'end_time': 20.0, 'color': 'green'}
]
```

### Выходные данные (Output)

**Тип:** `list[dict]`  
**Описание:** Список сегментов с добавленными цветами идей

**Структура каждого сегмента в результате:**

```python
{
    'start': float,           # Время начала сегмента (без изменений)
    'end': float,             # Время окончания сегмента (без изменений)
    'text': str,              # Текст сегмента (без изменений)
    'idea_colors': list[str]  # Список цветов идей для этого сегмента
}
```

**Пример результата:**

```python
[
    {
        'start': 0.0,
        'end': 10.0,
        'text': 'Часть 1',
        'idea_colors': ['red']
    },
    {
        'start': 10.0,
        'end': 20.0,
        'text': 'Часть 2',
        'idea_colors': ['red', 'blue', 'green']
    },
    {
        'start': 20.0,
        'end': 30.0,
        'text': 'Часть 3',
        'idea_colors': ['red', 'blue']
    }
]
```

### Алгоритм работы

1. **Инициализация:** Создается копия входных сегментов с пустым списком `idea_colors`
2. **Поиск ближайших сегментов:** Для каждой метки идеи перебираются все сегменты.
3. **Добавление цветов:** Если сегмент хотя бы частично пересекается с диапазоном [start_time, end_time], то его idea_colors пополняется цветом из метки.
4. **Возврат результата:** Возвращается список сегментов с добавленными цветами.

### Особенности

- **Ближайшее соответствие:** Сегмент будет подсвечен, если он пересекается с идеей хотя бы на небольшой промежуток времени.
- **Множественные цвета:** Один сегмент может содержать несколько цветов идей.
- **Сохранение данных:** Исходные данные сегментов (start, end, text) не изменяются.
- **Гибкость:** Поддерживает любые строковые значения для цветов.
